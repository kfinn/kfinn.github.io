<html>
  <head>
    <style type="text/css">
    body {
      color: green;
      height: 100%;
      width: 100%;
      padding: 0;
      margin: 0;
      overflow: hidden;
    }

    .item {
      width: 200px;
    }

    </style>
    <script type="text/javascript"
      src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js">
    </script>
    <script type="text/javascript"
      src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">
    </script>
    <script type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js">
    </script>
    <script type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/masonry/3.1.5/masonry.pkgd.min.js">
    </script>
    <script type="text/html" id="gif">
      <video autoplay loop class="item" width="<%=width%>" height="<%=height%>" style="height:<%=height%>">
        <source src="<%=mp4%>" type="video/mp4">
      </video>
    </script>
    <meta name="viewport" width="600">
  </head>
  <body>
  </body>
  <script type="text/javascript">
    var gifParent = $('body');
    var gifTemplate = _.template($('#gif').html());
    $.ajax('//api.giphy.com/v1/gifs/trending?limit=75&api_key=dc6zaTOxFJmzC')
    .done(function(result) {
      var data = result.data;
      var gifElements = _.map(data, function(imageData) {
        return gifTemplate(imageData.images.fixed_width);
      });
      gifParent.empty();
      gifParent.append(gifElements);
      gifParent.masonry({
        columnWidth: 200,
        itemSelector: ".item"
      }).masonry('addItems', gifElements);
    });
  </script>
</html>
